(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/party/detail"],{"29ea":function(t,e,n){"use strict";var o=n("6825"),i=n.n(o);i.a},"2ff9":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2857"),i=u(n("1099")),s=n("9716");function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){Promise.all([n.e("common/vendor"),n.e("components/my-panel")]).then(function(){return resolve(n("86f9"))}.bind(null,n)).catch(n.oe)},a=function(){Promise.all([n.e("common/vendor"),n.e("components/my-cell")]).then(function(){return resolve(n("5b9b"))}.bind(null,n)).catch(n.oe)},r=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-popup/uni-popup")]).then(function(){return resolve(n("32b5"))}.bind(null,n)).catch(n.oe)},d={components:{myPanel:c,myCell:a,uniPopup:r},data:function(){return{id:0,uid:0,num:0,selectNum:0,countDownTime:"",party:{},shop:{},list:[],selectedIds:[],status:2,isMaster:!1,isOver:!1,IsFailed:!1,isPay:!1}},computed:{IsEnroll:function(){var t=this;this.list.forEach((function(e){if(e.id===t.uid)return!0}))},isEdit:function(){return 2==this.status}},methods:{checkboxChange:function(t){this.selectedIds=t.detail.value},setMember:function(){var t=this;(0,s.setMember)({action_id:this.id,member_id:this.selectedIds}).then((function(e){t.getMembers()}))},getCountDownTime:function(t){var e=(0,o.countDownTime)(t,"minutes");0===e&&(this.status=2),this.countDownTime=e},currentStatus:function(){var t=(0,o.countDownTime)(this.party.begin_time,"minutes");"end"!==this.party.status&&0!=t||(this.isOver=!0),this.party.uid==this.uid&&(this.isMaster=!0)},getDetail:function(){var t=this;(0,s.getPartyDetail)({action_id:this.id}).then((function(e){var n=e.data.action;t.party=n,t.shop=e.data.shop,t.getCountDownTime(n.join_stop_time),t.currentStatus()}))},getMembers:function(){var t=this;this.list=[],(0,s.getMembers)({action_id:this.id}).then((function(e){t.list=e.data.member,t.list.map((function(t){"pass"===t.join_status?t.checked=!0:t.checked=!1})),t.num=e.data.member.length}))},joinParty:function(){var e=this;this.checkIsRegist(),(0,s.joinParty)({action_id:this.id}).then((function(n){0==n.data.code&&(e.getMembers(),t.showModal({title:"报名成功",content:"请等待组织者审核",showCancel:!1,success:function(){}}))}))},memberConfirm:function(){var e=this;t.showModal({title:"确认参与人员",content:"确认参与者后无法更改，请无误后点击确认",success:function(t){t.confirm&&e.setMember()}})},showAddress:function(){this.openLocation(24.475041,118.160191,this.shop.name,this.shop.addr)},goEdit:function(){t.navigateTo({url:"/pages/party/edit"})},pay:function(){},scanQrcode:function(){t.scanCode({scanType:["qrCode"],onlyFromCamera:!0,success:function(t){console.log(t)}})},openPop:function(){this.$refs.popup.open(),this.make()},make:function(){i.default.make({canvasId:"qrcode",text:"/pages/party/player?id="+this.id,size:t.upx2px(400),margin:10,backgroundColor:"#ffffff",foregroundColor:"#000000",fileType:"jpg",correctLevel:i.default.errorCorrectLevel.H,success:function(t){console.log(t)}})}},onLoad:function(e){this.id=e.id,this.uid=t.getStorageSync("userId")},onShow:function(){this.getDetail(),this.getMembers()},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"发现饭局邀请您来参加",path:"/page/detail?id="+this.id}}};e.default=d}).call(this,n("543d")["default"])},"34be":function(t,e,n){"use strict";n.r(e);var o=n("eca5"),i=n("9efd");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("29ea");var u,c=n("f0c5"),a=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"3e09867a",null,!1,o["a"],u);e["default"]=a.exports},6825:function(t,e,n){},"83ac":function(t,e,n){"use strict";(function(t){n("b69d");o(n("66fd"));var e=o(n("34be"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"9efd":function(t,e,n){"use strict";n.r(e);var o=n("2ff9"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},eca5:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o}));var o={uniPopup:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-popup/uni-popup")]).then(n.bind(null,"32b5"))}},i=function(){var t=this,e=t.$createElement;t._self._c},s=[]}},[["83ac","common/runtime","common/vendor"]]]);